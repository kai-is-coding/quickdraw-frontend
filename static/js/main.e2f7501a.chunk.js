(this["webpackJsonpquickdraw-frontend"]=this["webpackJsonpquickdraw-frontend"]||[]).push([[0],{42:function(e,t,a){e.exports=a(73)},47:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),s=a.n(o),l=(a(47),a(8)),i=a(9),c=a(11),u=a(10),d=a(12),h=a(3),m=a(14),p=a(6),g=a.n(p),f=function(e){return r.a.createElement("div",null,r.a.createElement("nav",null,e.loggedInStatus?r.a.createElement("div",null,r.a.createElement("h2",null,e.userDetails&&e.userDetails.username),r.a.createElement(h.b,{to:"/",onClick:function(){g.a.delete("https://quickdraw-backend.herokuapp.com/logout",{withCredentials:!0}).then((function(t){e.handleLogout(),e.history.push("/")})).catch((function(e){return console.warn("log out errors:",e)}))}},"Log Out")):r.a.createElement("div",null,r.a.createElement(h.b,{to:"/login"},"Login"),r.a.createElement("br",null),r.a.createElement(h.b,{to:"/signup"},"Sign Up"))))},E=function(){return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("h1",null,"Welcome to this site!")))},v=(a(69),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={rooms:null},a.handleClick=function(e){console.log("clicked!"),a.props.history.push("/playrooms/".concat(e))},a.showRooms=function(){return r.a.createElement("div",{className:"playrooms-container"},a.state.rooms.map((function(e){return r.a.createElement("div",{key:e.id,className:"playrooms"},e.title,e.users?r.a.createElement("div",{className:"users-container"},e.users.map((function(e){return r.a.createElement("div",{key:e.id,className:"users"},e.username)}))):null,r.a.createElement("button",{className:"start",onClick:function(){return a.handleClick(e.id)}},"Start Game!"))})))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("https://quickdraw-backend.herokuapp.com/playrooms",{withCredentials:!0}).then((function(t){e.setState({rooms:t.data}),console.log("rooms:",e.state.rooms[0])})).catch((function(e){return console.warn("playrooms errors: ",e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.loggedInStatus?r.a.createElement("div",null,r.a.createElement("h1",null,"Select your PlayRoom!"),this.state.rooms?this.showRooms():null):r.a.createElement("h2",null,"Please ",r.a.createElement(h.b,{to:"/login"},"Login")," to select playroom!"))}}]),t}(r.a.Component)),b=a(16),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={email:"test1@ga.co",password:"chicken",errors:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(b.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};g.a.post("https://quickdraw-backend.herokuapp.com/login",{user:t},{withCredentials:!0}).then((function(e){e.data.logged_in?(console.log(e.data),a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors})})).catch((function(e){return console.warn("login errors:",e)}))},a.redirect=function(){a.props.history.push("/playrooms")},a.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,a.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state;e.username,e.email,e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"email",type:"text",name:"email",defaultValue:"test1@ga.co",onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password",type:"password",name:"password",defaultValue:"chicken",onChange:this.handleChange}),r.a.createElement("button",{placeholder:"submit",type:"submit"},"Log In"),r.a.createElement("div",null,"or ",r.a.createElement(h.b,{to:"/signup"},"sign up"))),r.a.createElement("div",null,this.state.errors?this.handleErrors():null))}}]),t}(r.a.Component),y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",email:"",password:"",password_confirmation:"",errors:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(b.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t={username:a.state.username,email:a.state.email,password:a.state.password,password_confirmation:a.state.password_confirmation};g.a.post("https://quickdraw-backend.herokuapp.com/users",{user:t},{withCredentials:!0}).then((function(e){"created"===e.data.status?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors})})).catch((function(e){return console.warn("signup errors:",e)}))},a.redirect=function(){a.props.history.push("/playrooms")},a.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,a.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,o=e.password_confirmation;return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"username",type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"email",type:"text",name:"email",value:a,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password",type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password confirmation",type:"password",name:"password_confirmation",value:o,onChange:this.handleChange}),r.a.createElement("button",{placeholder:"submit",type:"submit"},"Sign Up")),r.a.createElement("div",null,this.state.errors?this.handleErrors():null))}}]),t}(r.a.Component),C=(a(70),a(20)),k=a(41),L=a.n(k),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={width:.8*window.innerWidth,height:.5*window.innerHeight,color:"#fff",room:null,inputMessage:null,receivedMessage:null},a.handleChange=function(e){console.log("change",e.lines),a.draw.sendLine({lines:e.lines})},a.clearCanvas=function(){a.saveableCanvas.clear(),a.draw.sendLine({lines:[]})},a.handleSubmit=function(e){e.preventDefault(),console.log("message submit:",a.state.inputMessage),a.draw.sendMessage({inputMessage:a.state.inputMessage})},a.handleMessageChange=function(e){a.setState({inputMessage:e.target.value})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;g.a.get("https://quickdraw-backend.herokuapp.com/playrooms/".concat(t),{withCredentials:!0}).then((function(a){console.log("you are in room ".concat(t)),e.setState({room:a.data})})).catch((function(e){return console.warn("playroom errors: ",e)})),this.cable=L.a.createConsumer("ws://quickdraw-backend.herokuapp.com/cable"),this.draw=this.cable.subscriptions.create({channel:"DrawsChannel"},{connected:function(){console.log("DrawsChannel WS CONNECTED!")},received:function(t){console.log("RECEIVED DrawsChannel DATA",t),e.loadableCanvas&&"send_line"===t.action?(e.loadableCanvas.clear(),e.loadableCanvas.simulateDrawingLines({lines:t.lines,immediate:!0})):"send_message"===t.action&&(console.log("receivedMessage:",t.inputMessage),e.setState({receivedMessage:t.inputMessage}))},sendLine:function(e){this.perform("send_line",e)},sendMessage:function(e){this.perform("send_message",e)}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.loggedInStatus?this.props.userDetails.draw?r.a.createElement("div",{className:"drawPanel-container"},r.a.createElement("div",{className:"drawPanel-container-top"},r.a.createElement("h2",null,"Draw here!"),this.state.receivedMessage?r.a.createElement("div",{className:"message-from-gusser"},this.state.receivedMessage):null,r.a.createElement("button",{onClick:function(){e.clearCanvas()}},"Clear"),r.a.createElement("button",{onClick:function(){e.saveableCanvas.undo()}},"Undo")),r.a.createElement(C.a,{className:"drawPanel",onChange:this.handleChange,canvasWidth:this.state.width,canvasHeight:this.state.height,ref:function(t){return e.saveableCanvas=t}})):r.a.createElement("div",null,r.a.createElement("h3",null,"Guess!"),r.a.createElement(C.a,{className:"drawPanel",canvasWidth:this.state.width,canvasHeight:this.state.height,brushRadius:0,brushColor:this.state.color,catenaryColor:this.state.color,disabled:!0,ref:function(t){return e.loadableCanvas=t}}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Type Your Answer Here!",onChange:this.handleMessageChange}),r.a.createElement("button",{type:"submit"},"Answer!"))):r.a.createElement("h2",null,"Please ",r.a.createElement(h.b,{to:"/login"},"Login")," to continue draw!"))}}]),t}(r.a.Component),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1,user:{}},a.handleLogin=function(e){a.setState({isLoggedIn:!0,user:e.user})},a.handleLogout=function(){a.setState({isLoggedIn:!1,user:{}})},a.loginStatus=function(){g.a.get("https://quickdraw-backend.herokuapp.com/logged_in",{withCredentials:!0}).then((function(e){e.data.logged_in?a.handleLogin(e.data):a.handleLogout()})).catch((function(e){return console.warn("api errors:",e)}))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement("h1",null,"Quick Draw"),r.a.createElement(h.b,{to:"/"},"Home")," ",r.a.createElement("br",null),r.a.createElement(h.b,{to:"/playrooms"},"PlayRooms"),r.a.createElement(m.a,{path:"/",render:function(t){return r.a.createElement(f,Object.assign({},t,{handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn,userDetails:e.state.user}))}}),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:E}),r.a.createElement(m.a,{exact:!0,path:"/playrooms",render:function(t){return r.a.createElement(v,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(m.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(w,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(m.a,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(y,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(m.a,{exact:!0,path:"/playrooms/:id",render:function(t){return r.a.createElement(S,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn,userDetails:e.state.user}))}})))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.e2f7501a.chunk.js.map